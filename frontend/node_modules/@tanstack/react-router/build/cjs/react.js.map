{"version":3,"file":"react.js","sources":["../../src/react.tsx"],"sourcesContent":["import * as React from 'react'\nimport { NoInfer, useStore } from '@tanstack/react-store'\nimport invariant from 'tiny-invariant'\nimport warning from 'tiny-warning'\nimport {\n  functionalUpdate,\n  last,\n  pick,\n  MatchRouteOptions,\n  RegisteredRouter,\n  RouterOptions,\n  Router,\n  RouteMatch,\n  RouteByPath,\n  AnyRoute,\n  AnyRouteProps,\n  LinkOptions,\n  ToOptions,\n  ResolveRelativePath,\n  NavigateOptions,\n  ResolveFullPath,\n  ResolveId,\n  AnySearchSchema,\n  ParsePathParams,\n  RouteContext,\n  AnyContext,\n  UseLoaderResult,\n  ResolveFullSearchSchema,\n  Route,\n  RouteConstraints,\n  RoutePaths,\n  RoutesById,\n  RouteIds,\n  RouteById,\n  ParseRoute,\n  AllParams,\n  rootRouteId,\n  AnyPathParams,\n  Expand,\n  ResolveAllParams,\n  DeepMergeAll,\n  IsAny,\n} from '@tanstack/router-core'\n\nconst useLayoutEffect =\n  typeof window !== 'undefined' ? React.useLayoutEffect : React.useEffect\n\ndeclare module '@tanstack/router-core' {\n  interface RouterOptions<\n    TRouteTree extends AnyRoute,\n    TDehydrated extends Record<string, any>,\n  > {\n    Wrap?: React.ComponentType<{\n      children: React.ReactNode\n      dehydratedState?: TDehydrated\n    }>\n  }\n\n  interface RegisterRouteComponent<\n    TLoader = unknown,\n    TFullSearchSchema extends Record<string, any> = AnySearchSchema,\n    TAllParams extends AnyPathParams = AnyPathParams,\n    TAllContext extends Record<string, any> = AnyContext,\n  > {\n    RouteComponent: RouteComponent<\n      RouteProps<TLoader, TFullSearchSchema, TAllParams, TAllContext>\n    >\n  }\n\n  interface RegisterErrorRouteComponent<\n    TFullSearchSchema extends Record<string, any> = AnySearchSchema,\n    TAllParams extends AnyPathParams = AnyPathParams,\n    TAllContext extends Record<string, any> = AnyContext,\n  > {\n    ErrorRouteComponent: RouteComponent<\n      ErrorRouteProps<TFullSearchSchema, TAllParams, TAllContext>\n    >\n  }\n\n  interface RegisterPendingRouteComponent<\n    TFullSearchSchema extends Record<string, any> = AnySearchSchema,\n    TAllParams extends AnyPathParams = AnyPathParams,\n    TAllContext extends Record<string, any> = AnyContext,\n  > {\n    PendingRouteComponent: RouteComponent<\n      PendingRouteProps<TFullSearchSchema, TAllParams, TAllContext>\n    >\n  }\n\n  interface Route<\n    TParentRoute extends RouteConstraints['TParentRoute'] = AnyRoute,\n    TPath extends RouteConstraints['TPath'] = '/',\n    TFullPath extends RouteConstraints['TFullPath'] = ResolveFullPath<\n      TParentRoute,\n      TPath\n    >,\n    TCustomId extends RouteConstraints['TCustomId'] = string,\n    TId extends RouteConstraints['TId'] = ResolveId<\n      TParentRoute,\n      TCustomId,\n      TPath\n    >,\n    TLoaderContext extends RouteConstraints['TLoaderContext'] = AnyContext,\n    TLoader = unknown,\n    TSearchSchema extends RouteConstraints['TSearchSchema'] = {},\n    TFullSearchSchema extends RouteConstraints['TFullSearchSchema'] = ResolveFullSearchSchema<\n      TParentRoute,\n      TSearchSchema\n    >,\n    TParams extends RouteConstraints['TParams'] = Expand<\n      Record<ParsePathParams<TPath>, string>\n    >,\n    TAllParams extends RouteConstraints['TAllParams'] = ResolveAllParams<\n      TParentRoute,\n      TParams\n    >,\n    TRouteContext extends RouteConstraints['TRouteContext'] = RouteContext,\n    TAllContext extends RouteConstraints['TAllContext'] = Expand<\n      DeepMergeAll<\n        [\n          IsAny<TParentRoute['types']['context'], {}>,\n          TLoaderContext,\n          TRouteContext,\n        ]\n      >\n    >,\n    TRouterContext extends RouteConstraints['TRouterContext'] = AnyContext,\n    TChildren extends RouteConstraints['TChildren'] = unknown,\n    TRouteTree extends RouteConstraints['TRouteTree'] = AnyRoute,\n  > {\n    useMatch: <TSelected = TAllContext>(opts?: {\n      select?: (search: TAllContext) => TSelected\n    }) => TSelected\n    useLoader: <TSelected = TLoader>(opts?: {\n      select?: (search: TLoader) => TSelected\n    }) => UseLoaderResult<TSelected>\n    useRouteContext: <TSelected = TAllContext>(opts?: {\n      select?: (search: TAllContext) => TSelected\n    }) => TSelected\n    useSearch: <TSelected = TFullSearchSchema>(opts?: {\n      select?: (search: TFullSearchSchema) => TSelected\n    }) => TSelected\n    useParams: <TSelected = TAllParams>(opts?: {\n      select?: (search: TAllParams) => TSelected\n    }) => TSelected\n  }\n\n  interface RegisterRouteProps<\n    TLoader = unknown,\n    TFullSearchSchema extends Record<string, any> = AnySearchSchema,\n    TAllParams extends AnyPathParams = AnyPathParams,\n    TAllContext extends Record<string, any> = AnyContext,\n  > {\n    RouteProps: RouteProps<TLoader, TFullSearchSchema, TAllParams, TAllContext>\n  }\n\n  interface RegisterPendingRouteProps<\n    TFullSearchSchema extends Record<string, any> = AnySearchSchema,\n    TAllParams extends AnyPathParams = AnyPathParams,\n    TAllContext extends Record<string, any> = AnyContext,\n  > {\n    PendingRouteProps: PendingRouteProps<\n      TFullSearchSchema,\n      TAllParams,\n      TAllContext\n    >\n  }\n\n  interface RegisterErrorRouteProps<\n    TFullSearchSchema extends Record<string, any> = AnySearchSchema,\n    TAllParams extends AnyPathParams = AnyPathParams,\n    TAllContext extends Record<string, any> = AnyContext,\n  > {\n    ErrorRouteProps: ErrorRouteProps\n  }\n}\n\nexport type RouteProps<\n  TLoader = unknown,\n  TFullSearchSchema extends Record<string, any> = AnySearchSchema,\n  TAllParams extends AnyPathParams = AnyPathParams,\n  TAllContext extends Record<string, any> = AnyContext,\n> = {\n  useLoader: <TSelected = TLoader>(opts?: {\n    select?: (search: TLoader) => TSelected\n  }) => UseLoaderResult<TSelected>\n  useMatch: <TSelected = TAllContext>(opts?: {\n    select?: (search: TAllContext) => TSelected\n  }) => TSelected\n  useRouteContext: <TSelected = TAllContext>(opts?: {\n    select?: (search: TAllContext) => TSelected\n  }) => TSelected\n  useSearch: <TSelected = TFullSearchSchema>(opts?: {\n    select?: (search: TFullSearchSchema) => TSelected\n  }) => TSelected\n  useParams: <TSelected = TAllParams>(opts?: {\n    select?: (search: TAllParams) => TSelected\n  }) => TSelected\n}\n\nexport type ErrorRouteProps<\n  TFullSearchSchema extends Record<string, any> = AnySearchSchema,\n  TAllParams extends AnyPathParams = AnyPathParams,\n  TAllContext extends Record<string, any> = AnyContext,\n> = {\n  error: unknown\n  info: { componentStack: string }\n} & Omit<\n  RouteProps<unknown, TFullSearchSchema, TAllParams, TAllContext>,\n  'useLoader'\n>\n\nexport type PendingRouteProps<\n  TFullSearchSchema extends Record<string, any> = AnySearchSchema,\n  TAllParams extends AnyPathParams = AnyPathParams,\n  TAllContext extends Record<string, any> = AnyContext,\n> = Omit<\n  RouteProps<unknown, TFullSearchSchema, TAllParams, TAllContext>,\n  'useLoader'\n>\n\nRoute.__onInit = (route) => {\n  Object.assign(route, {\n    useMatch: (opts = {}) => {\n      return useMatch({ ...opts, from: route.id }) as any\n    },\n    useLoader: (opts = {}) => {\n      return useLoader({ ...opts, from: route.id }) as any\n    },\n    useRouteContext: (opts: any = {}) => {\n      return useMatch({\n        ...opts,\n        from: route.id,\n        select: (d: any) => (opts?.select ? opts.select(d.context) : d.context),\n      } as any)\n    },\n    useSearch: (opts = {}) => {\n      return useSearch({ ...opts, from: route.id } as any)\n    },\n    useParams: (opts = {}) => {\n      return useParams({ ...opts, from: route.id } as any)\n    },\n  })\n}\n\n//\n\ntype ReactNode = any\n\nexport type SyncRouteComponent<TProps> =\n  | ((props: TProps) => ReactNode)\n  | React.LazyExoticComponent<(props: TProps) => ReactNode>\n\nexport type AsyncRouteComponent<TProps> = SyncRouteComponent<TProps> & {\n  preload?: () => Promise<void>\n}\n\nexport type ErrorRouteComponent = AsyncRouteComponent<ErrorRouteComponentProps>\n\nexport type ErrorRouteComponentProps = {\n  error: Error\n  info: { componentStack: string }\n}\n\nexport type AnyRouteComponent = RouteComponent<AnyRouteProps>\n\nexport type RouteComponent<TProps> = AsyncRouteComponent<TProps>\n\nexport function lazyRouteComponent<\n  T extends Record<string, any>,\n  TKey extends keyof T = 'default',\n>(\n  importer: () => Promise<T>,\n  exportName?: TKey,\n): T[TKey] extends (props: infer TProps) => any\n  ? AsyncRouteComponent<TProps>\n  : never {\n  let loadPromise: Promise<any>\n\n  const load = () => {\n    if (!loadPromise) {\n      loadPromise = importer()\n    }\n\n    return loadPromise\n  }\n\n  const lazyComp = React.lazy(async () => {\n    const moduleExports = await load()\n    const comp = moduleExports[exportName ?? 'default']\n    return {\n      default: comp,\n    }\n  })\n\n  ;(lazyComp as any).preload = load\n\n  return lazyComp as any\n}\n\nexport type LinkPropsOptions<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TFrom extends RoutePaths<TRouteTree> = '/',\n  TTo extends string = '',\n  TMaskFrom extends RoutePaths<TRouteTree> = '/',\n  TMaskTo extends string = '',\n> = LinkOptions<TRouteTree, TFrom, TTo, TMaskFrom, TMaskTo> & {\n  // A function that returns additional props for the `active` state of this link. These props override other props passed to the link (`style`'s are merged, `className`'s are concatenated)\n  activeProps?:\n    | React.AnchorHTMLAttributes<HTMLAnchorElement>\n    | (() => React.AnchorHTMLAttributes<HTMLAnchorElement>)\n  // A function that returns additional props for the `inactive` state of this link. These props override other props passed to the link (`style`'s are merged, `className`'s are concatenated)\n  inactiveProps?:\n    | React.AnchorHTMLAttributes<HTMLAnchorElement>\n    | (() => React.AnchorHTMLAttributes<HTMLAnchorElement>)\n  // If set to `true`, the link's underlying navigate() call will be wrapped in a `React.startTransition` call. Defaults to `true`.\n  startTransition?: boolean\n}\n\nexport type MakeUseMatchRouteOptions<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TFrom extends RoutePaths<TRouteTree> = '/',\n  TTo extends string = '',\n  TMaskFrom extends RoutePaths<TRouteTree> = '/',\n  TMaskTo extends string = '',\n> = ToOptions<AnyRoute, TFrom, TTo, TMaskFrom, TMaskTo> & MatchRouteOptions\n\nexport type MakeMatchRouteOptions<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TFrom extends RoutePaths<TRouteTree> = '/',\n  TTo extends string = '',\n  TMaskFrom extends RoutePaths<TRouteTree> = '/',\n  TMaskTo extends string = '',\n> = ToOptions<TRouteTree, TFrom, TTo, TMaskFrom, TMaskTo> &\n  MatchRouteOptions & {\n    // If a function is passed as a child, it will be given the `isActive` boolean to aid in further styling on the element it returns\n    children?:\n      | ((\n          params?: RouteByPath<\n            TRouteTree,\n            ResolveRelativePath<TFrom, NoInfer<TTo>>\n          >['types']['allParams'],\n        ) => ReactNode)\n      | React.ReactNode\n  }\n\nexport type MakeLinkPropsOptions<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TFrom extends RoutePaths<TRouteTree> = '/',\n  TTo extends string = '',\n  TMaskFrom extends RoutePaths<TRouteTree> = '/',\n  TMaskTo extends string = '',\n> = LinkPropsOptions<TRouteTree, TFrom, TTo, TMaskFrom, TMaskTo> &\n  React.AnchorHTMLAttributes<HTMLAnchorElement>\n\nexport type MakeLinkOptions<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TFrom extends RoutePaths<TRouteTree> = '/',\n  TTo extends string = '',\n  TMaskFrom extends RoutePaths<TRouteTree> = '/',\n  TMaskTo extends string = '',\n> = LinkPropsOptions<TRouteTree, TFrom, TTo, TMaskFrom, TMaskTo> &\n  Omit<React.AnchorHTMLAttributes<HTMLAnchorElement>, 'children'> & {\n    // If a function is passed as a child, it will be given the `isActive` boolean to aid in further styling on the element it returns\n    children?:\n      | React.ReactNode\n      | ((state: { isActive: boolean }) => React.ReactNode)\n  }\n\nexport type PromptProps = {\n  message: string\n  condition?: boolean | any\n  children?: ReactNode\n}\n\n//\n\nexport function useLinkProps<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TFrom extends RoutePaths<TRouteTree> = '/',\n  TTo extends string = '',\n  TMaskFrom extends RoutePaths<TRouteTree> = '/',\n  TMaskTo extends string = '',\n>(\n  options: MakeLinkPropsOptions<TRouteTree, TFrom, TTo, TMaskFrom, TMaskTo>,\n): React.AnchorHTMLAttributes<HTMLAnchorElement> {\n  const router = useRouter()\n  const match = useMatch({\n    strict: false,\n  })\n\n  const {\n    // custom props\n    type,\n    children,\n    target,\n    activeProps = () => ({ className: 'active' }),\n    inactiveProps = () => ({}),\n    activeOptions,\n    disabled,\n    hash,\n    search,\n    params,\n    to,\n    state,\n    mask,\n    preload,\n    preloadDelay,\n    replace,\n    // element props\n    style,\n    className,\n    onClick,\n    onFocus,\n    onMouseEnter,\n    onMouseLeave,\n    onTouchStart,\n    ...rest\n  } = options\n\n  const linkInfo = router.buildLink({\n    from: options.to ? match.pathname : undefined,\n    ...options,\n  } as any)\n\n  if (linkInfo.type === 'external') {\n    const { href } = linkInfo\n    return { href }\n  }\n\n  const {\n    handleClick,\n    handleFocus,\n    handleEnter,\n    handleLeave,\n    handleTouchStart,\n    isActive,\n    next,\n  } = linkInfo\n\n  const handleReactClick = (e: Event) => {\n    if (options.startTransition ?? true) {\n      ;(React.startTransition || ((d) => d))(() => {\n        handleClick(e)\n      })\n    }\n  }\n\n  const composeHandlers =\n    (handlers: (undefined | ((e: any) => void))[]) =>\n    (e: React.SyntheticEvent) => {\n      if (e.persist) e.persist()\n      handlers.filter(Boolean).forEach((handler) => {\n        if (e.defaultPrevented) return\n        handler!(e)\n      })\n    }\n\n  // Get the active props\n  const resolvedActiveProps: React.HTMLAttributes<HTMLAnchorElement> = isActive\n    ? functionalUpdate(activeProps as any, {}) ?? {}\n    : {}\n\n  // Get the inactive props\n  const resolvedInactiveProps: React.HTMLAttributes<HTMLAnchorElement> =\n    isActive ? {} : functionalUpdate(inactiveProps, {}) ?? {}\n\n  return {\n    ...resolvedActiveProps,\n    ...resolvedInactiveProps,\n    ...rest,\n    href: disabled\n      ? undefined\n      : next.maskedLocation\n      ? next.maskedLocation.href\n      : next.href,\n    onClick: composeHandlers([onClick, handleReactClick]),\n    onFocus: composeHandlers([onFocus, handleFocus]),\n    onMouseEnter: composeHandlers([onMouseEnter, handleEnter]),\n    onMouseLeave: composeHandlers([onMouseLeave, handleLeave]),\n    onTouchStart: composeHandlers([onTouchStart, handleTouchStart]),\n    target,\n    style: {\n      ...style,\n      ...resolvedActiveProps.style,\n      ...resolvedInactiveProps.style,\n    },\n    className:\n      [\n        className,\n        resolvedActiveProps.className,\n        resolvedInactiveProps.className,\n      ]\n        .filter(Boolean)\n        .join(' ') || undefined,\n    ...(disabled\n      ? {\n          role: 'link',\n          'aria-disabled': true,\n        }\n      : undefined),\n    ['data-status']: isActive ? 'active' : undefined,\n  }\n}\n\nexport interface LinkComponent<TProps extends Record<string, any> = {}> {\n  <\n    TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n    TFrom extends RoutePaths<TRouteTree> = '/',\n    TTo extends string = '',\n    TMaskFrom extends RoutePaths<TRouteTree> = '/',\n    TMaskTo extends string = '',\n  >(\n    props: MakeLinkOptions<TRouteTree, TFrom, TTo, TMaskFrom, TMaskTo> &\n      TProps &\n      React.RefAttributes<HTMLAnchorElement>,\n  ): ReactNode\n}\n\nexport const Link: LinkComponent = React.forwardRef((props: any, ref) => {\n  const linkProps = useLinkProps(props)\n\n  return (\n    <a\n      {...{\n        ref: ref as any,\n        ...linkProps,\n        children:\n          typeof props.children === 'function'\n            ? props.children({\n                isActive: (linkProps as any)['data-status'] === 'active',\n              })\n            : props.children,\n      }}\n    />\n  )\n}) as any\n\nexport function Navigate<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TFrom extends RoutePaths<TRouteTree> = '/',\n  TTo extends string = '',\n  TMaskFrom extends RoutePaths<TRouteTree> = '/',\n  TMaskTo extends string = '',\n>(props: NavigateOptions<TRouteTree, TFrom, TTo, TMaskFrom, TMaskTo>): null {\n  const router = useRouter()\n  const match = useMatch({ strict: false })\n\n  useLayoutEffect(() => {\n    router.navigate({\n      from: props.to ? match.pathname : undefined,\n      ...props,\n    } as any)\n  }, [])\n\n  return null\n}\n\nexport const matchIdsContext = React.createContext<string[]>(null!)\nexport const routerContext = React.createContext<RegisteredRouter>(null!)\n\nexport type RouterProps<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TDehydrated extends Record<string, any> = Record<string, any>,\n> = Omit<RouterOptions<TRouteTree, TDehydrated>, 'context'> & {\n  router: Router<TRouteTree>\n  context?: Partial<RouterOptions<TRouteTree, TDehydrated>['context']>\n}\n\nexport function useRouterState<TSelected = RegisteredRouter['state']>(opts?: {\n  select: (state: RegisteredRouter['state']) => TSelected\n}): TSelected {\n  const router = useRouter()\n  return useStore(router.__store, opts?.select as any)\n}\n\nexport function RouterProvider<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TDehydrated extends Record<string, any> = Record<string, any>,\n>({ router, ...rest }: RouterProps<TRouteTree, TDehydrated>) {\n  router.update(rest)\n\n  React.useEffect(() => {\n    let unsub\n\n    React.startTransition(() => {\n      unsub = router.mount()\n    })\n\n    return unsub\n  }, [router])\n\n  const Wrap = router.options.Wrap || React.Fragment\n\n  return (\n    <Wrap>\n      <routerContext.Provider value={router as any}>\n        <Matches />\n      </routerContext.Provider>\n    </Wrap>\n  )\n}\n\nfunction Matches() {\n  const router = useRouter()\n\n  const matchIds = useRouterState({\n    select: (state) => {\n      return state.renderedMatchIds\n    },\n  })\n\n  const locationKey = useRouterState({\n    select: (d) => d.resolvedLocation.state?.key,\n  })\n\n  const route = router.getRoute(rootRouteId)\n\n  const errorComponent = React.useCallback(\n    (props: any) => {\n      return React.createElement(ErrorComponent, {\n        ...props,\n        useMatch: route.useMatch,\n        useRouteContext: route.useRouteContext,\n        useSearch: route.useSearch,\n        useParams: route.useParams,\n      })\n    },\n    [route],\n  )\n\n  return (\n    <matchIdsContext.Provider value={[undefined!, ...matchIds]}>\n      <CatchBoundary\n        resetKey={locationKey}\n        errorComponent={errorComponent}\n        onCatch={() => {\n          warning(\n            false,\n            `Error in router! Consider setting an 'errorComponent' in your RootRoute! 👍`,\n          )\n        }}\n      >\n        <Outlet />\n      </CatchBoundary>\n    </matchIdsContext.Provider>\n  )\n}\n\nexport function useRouter(): RegisteredRouter {\n  const value = React.useContext(routerContext)\n  warning(value, 'useRouter must be used inside a <Router> component!')\n  return value\n}\n\nexport function useMatches<T = RouteMatch[]>(opts?: {\n  select?: (matches: RouteMatch[]) => T\n}): T {\n  const matchIds = React.useContext(matchIdsContext)\n\n  return useRouterState({\n    select: (state) => {\n      const matches = state.renderedMatches.slice(\n        state.renderedMatches.findIndex((d) => d.id === matchIds[0]),\n      )\n      return opts?.select ? opts.select(matches) : (matches as T)\n    },\n  })\n}\n\ntype StrictOrFrom<TFrom> =\n  | {\n      from: TFrom\n      strict?: true\n    }\n  | {\n      from?: never\n      strict: false\n    }\n\nexport function useMatch<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TFrom extends RouteIds<TRouteTree> = RouteIds<TRouteTree>,\n  TStrict extends boolean = true,\n  TRouteMatchState = RouteMatch<TRouteTree, TFrom>,\n  TSelected = TRouteMatchState,\n>(\n  opts: StrictOrFrom<TFrom> & {\n    select?: (match: TRouteMatchState) => TSelected\n  },\n): TStrict extends true ? TRouteMatchState : TRouteMatchState | undefined {\n  const router = useRouter()\n  const nearestMatchId = React.useContext(matchIdsContext)[0]!\n  const nearestMatchRouteId = router.getRouteMatch(nearestMatchId)?.routeId\n\n  const matchRouteId = useRouterState({\n    select: (state) => {\n      const match = opts?.from\n        ? state.renderedMatches.find((d) => d.routeId === opts?.from)\n        : state.renderedMatches.find((d) => d.id === nearestMatchId)\n\n      return match!.routeId\n    },\n  })\n\n  if (opts?.strict ?? true) {\n    invariant(\n      nearestMatchRouteId == matchRouteId,\n      `useMatch(\"${\n        matchRouteId as string\n      }\") is being called in a component that is meant to render the '${nearestMatchRouteId}' route. Did you mean to 'useMatch(\"${\n        matchRouteId as string\n      }\", { strict: false })' or 'useRoute(\"${\n        matchRouteId as string\n      }\")' instead?`,\n    )\n  }\n\n  const matchSelection = useRouterState({\n    select: (state) => {\n      const match = opts?.from\n        ? state.renderedMatches.find((d) => d.routeId === opts?.from)\n        : state.renderedMatches.find((d) => d.id === nearestMatchId)\n\n      invariant(\n        match,\n        `Could not find ${\n          opts?.from\n            ? `an active match from \"${opts.from}\"`\n            : 'a nearest match!'\n        }`,\n      )\n\n      return opts?.select ? opts.select(match as any) : match\n    },\n  })\n\n  return matchSelection as any\n}\n\nexport type RouteFromIdOrRoute<\n  T,\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n> = T extends ParseRoute<TRouteTree>\n  ? T\n  : T extends RouteIds<TRouteTree>\n  ? RoutesById<TRouteTree>[T]\n  : T extends string\n  ? RouteIds<TRouteTree>\n  : never\n\nexport function useLoader<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TFrom extends RouteIds<TRouteTree> = RouteIds<TRouteTree>,\n  TStrict extends boolean = true,\n  TLoader = RouteById<TRouteTree, TFrom>['types']['loader'],\n  TSelected = TLoader,\n>(\n  opts: StrictOrFrom<TFrom> & {\n    select?: (search: TLoader) => TSelected\n  },\n): TStrict extends true ? TSelected : TSelected | undefined {\n  return useMatch({\n    ...(opts as any),\n    select: (match: RouteMatch) =>\n      opts?.select\n        ? opts?.select(match.loaderData as TLoader)\n        : match.loaderData,\n  })\n}\n\nexport function useRouterContext<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TFrom extends RouteIds<TRouteTree> = RouteIds<TRouteTree>,\n  TStrict extends boolean = true,\n  TContext = RouteById<TRouteTree, TFrom>['types']['context'],\n  TSelected = TContext,\n>(\n  opts: StrictOrFrom<TFrom> & {\n    select?: (search: TContext) => TSelected\n  },\n): TStrict extends true ? TSelected : TSelected | undefined {\n  return useMatch({\n    ...(opts as any),\n    select: (match: RouteMatch) =>\n      opts?.select ? opts.select(match.context as TContext) : match.context,\n  })\n}\n\nexport function useRouteContext<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TFrom extends RouteIds<TRouteTree> = RouteIds<TRouteTree>,\n  TStrict extends boolean = true,\n  TRouteContext = RouteById<TRouteTree, TFrom>['types']['context'],\n  TSelected = TRouteContext,\n>(\n  opts: StrictOrFrom<TFrom> & {\n    select?: (search: TRouteContext) => TSelected\n  },\n): TStrict extends true ? TSelected : TSelected | undefined {\n  return useMatch({\n    ...(opts as any),\n    select: (match: RouteMatch) =>\n      opts?.select\n        ? opts.select(match.context as TRouteContext)\n        : match.context,\n  })\n}\n\nexport function useSearch<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TFrom extends RouteIds<TRouteTree> = RouteIds<TRouteTree>,\n  TStrict extends boolean = true,\n  TSearch = RouteById<TRouteTree, TFrom>['types']['fullSearchSchema'],\n  TSelected = TSearch,\n>(\n  opts: StrictOrFrom<TFrom> & {\n    select?: (search: TSearch) => TSelected\n  },\n): TStrict extends true ? TSelected : TSelected | undefined {\n  return useMatch({\n    ...(opts as any),\n    select: (match: RouteMatch) => {\n      return opts?.select ? opts.select(match.search as TSearch) : match.search\n    },\n  })\n}\n\nexport function useParams<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TFrom extends RouteIds<TRouteTree> = RouteIds<TRouteTree>,\n  TDefaultSelected = AllParams<TRouteTree> &\n    RouteById<TRouteTree, TFrom>['types']['allParams'],\n  TSelected = TDefaultSelected,\n>(\n  opts: StrictOrFrom<TFrom> & {\n    select?: (search: TDefaultSelected) => TSelected\n  },\n): TSelected {\n  return useRouterState({\n    select: (state: any) => {\n      const params = (last(state.renderedMatches) as any)?.params\n      return opts?.select ? opts.select(params) : params\n    },\n  })\n}\n\nexport function useNavigate<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TDefaultFrom extends RoutePaths<TRouteTree> = '/',\n>(defaultOpts?: { from?: TDefaultFrom }) {\n  const router = useRouter()\n  const match = useMatch({\n    strict: false,\n  })\n  return React.useCallback(\n    <\n      TFrom extends RoutePaths<TRouteTree> = TDefaultFrom,\n      TTo extends string = '',\n      TMaskFrom extends RoutePaths<TRouteTree> = '/',\n      TMaskTo extends string = '',\n    >(\n      opts?: NavigateOptions<TRouteTree, TFrom, TTo, TMaskFrom, TMaskTo>,\n    ) => {\n      return router.navigate({\n        from: opts?.to ? match.pathname : undefined,\n        ...defaultOpts,\n        ...(opts as any),\n      })\n    },\n    [],\n  )\n}\n\nexport function useMatchRoute<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n>() {\n  const router = useRouter()\n\n  return React.useCallback(\n    <\n      TFrom extends RoutePaths<TRouteTree> = '/',\n      TTo extends string = '',\n      TMaskFrom extends RoutePaths<TRouteTree> = '/',\n      TMaskTo extends string = '',\n      TResolved extends string = ResolveRelativePath<TFrom, NoInfer<TTo>>,\n    >(\n      opts: MakeUseMatchRouteOptions<\n        TRouteTree,\n        TFrom,\n        TTo,\n        TMaskFrom,\n        TMaskTo\n      >,\n    ): false | RouteById<TRouteTree, TResolved>['types']['allParams'] => {\n      const { pending, caseSensitive, ...rest } = opts\n\n      return router.matchRoute(rest as any, {\n        pending,\n        caseSensitive,\n      })\n    },\n    [],\n  )\n}\n\nexport function MatchRoute<\n  TRouteTree extends AnyRoute = RegisteredRouter['routeTree'],\n  TFrom extends RoutePaths<TRouteTree> = '/',\n  TTo extends string = '',\n  TMaskFrom extends RoutePaths<TRouteTree> = '/',\n  TMaskTo extends string = '',\n>(\n  props: MakeMatchRouteOptions<TRouteTree, TFrom, TTo, TMaskFrom, TMaskTo>,\n): any {\n  const matchRoute = useMatchRoute()\n  const params = matchRoute(props as any)\n\n  if (typeof props.children === 'function') {\n    return (props.children as any)(params)\n  }\n\n  return !!params ? props.children : null\n}\n\nexport function Outlet() {\n  const matchIds = React.useContext(matchIdsContext).slice(1)\n\n  if (!matchIds[0]) {\n    return null\n  }\n\n  return <Match matchIds={matchIds} />\n}\n\nconst defaultPending = () => null\n\nfunction Match({ matchIds }: { matchIds: string[] }) {\n  const router = useRouter()\n  const matchId = matchIds[0]!\n  const routeId = router.getRouteMatch(matchId)!.routeId\n  const route = router.getRoute(routeId)\n  const locationKey = useRouterState({\n    select: (s) => s.resolvedLocation.state?.key,\n  })\n\n  const PendingComponent = (route.options.pendingComponent ??\n    router.options.defaultPendingComponent ??\n    defaultPending) as any\n\n  const routeErrorComponent =\n    route.options.errorComponent ??\n    router.options.defaultErrorComponent ??\n    ErrorComponent\n\n  const ResolvedSuspenseBoundary =\n    route.options.wrapInSuspense ?? !route.isRoot\n      ? React.Suspense\n      : SafeFragment\n\n  const ResolvedCatchBoundary = !!routeErrorComponent\n    ? CatchBoundary\n    : SafeFragment\n\n  const errorComponent = React.useCallback(\n    (props: any) => {\n      return React.createElement(routeErrorComponent, {\n        ...props,\n        useMatch: route.useMatch,\n        useRouteContext: route.useRouteContext,\n        useSearch: route.useSearch,\n        useParams: route.useParams,\n      })\n    },\n    [route],\n  )\n\n  return (\n    <matchIdsContext.Provider value={matchIds}>\n      <ResolvedSuspenseBoundary\n        fallback={React.createElement(PendingComponent, {\n          useMatch: route.useMatch,\n          useRouteContext: route.useRouteContext,\n          useSearch: route.useSearch,\n          useParams: route.useParams,\n        })}\n      >\n        <ResolvedCatchBoundary\n          resetKey={locationKey}\n          errorComponent={errorComponent}\n          onCatch={() => {\n            warning(false, `Error in route match: ${matchId}`)\n          }}\n        >\n          <MatchInner matchId={matchId} PendingComponent={PendingComponent} />\n        </ResolvedCatchBoundary>\n      </ResolvedSuspenseBoundary>\n    </matchIdsContext.Provider>\n  )\n}\n\nfunction MatchInner({\n  matchId,\n  PendingComponent,\n}: {\n  matchId: string\n  PendingComponent: any\n}): any {\n  const router = useRouter()\n\n  const match = useRouterState({\n    select: (d) => {\n      const match = d.matchesById[matchId]\n      return pick(match!, ['status', 'loadPromise', 'routeId', 'error'])\n    },\n  })\n\n  const route = router.getRoute(match.routeId)\n\n  if (match.status === 'error') {\n    throw match.error\n  }\n\n  if (match.status === 'pending') {\n    return React.createElement(PendingComponent, {\n      useLoader: route.useLoader,\n      useMatch: route.useMatch,\n      useRouteContext: route.useRouteContext,\n      useSearch: route.useSearch,\n      useParams: route.useParams,\n    })\n  }\n\n  if (match.status === 'success') {\n    let comp = route.options.component ?? router.options.defaultComponent\n\n    if (comp) {\n      return React.createElement(comp, {\n        useLoader: route.useLoader,\n        useMatch: route.useMatch,\n        useRouteContext: route.useRouteContext as any,\n        useSearch: route.useSearch,\n        useParams: route.useParams as any,\n      } as any)\n    }\n\n    return <Outlet />\n  }\n\n  invariant(\n    false,\n    'Idle routeMatch status encountered during rendering! You should never see this. File an issue!',\n  )\n}\n\nfunction SafeFragment(props: any) {\n  return <>{props.children}</>\n}\n\nexport function useInjectHtml() {\n  const router = useRouter()\n\n  return React.useCallback(\n    (html: string | (() => Promise<string> | string)) => {\n      router.injectHtml(html)\n    },\n    [],\n  )\n}\n\nexport function useDehydrate() {\n  const router = useRouter()\n\n  return React.useCallback(function dehydrate<T>(\n    key: any,\n    data: T | (() => Promise<T> | T),\n  ) {\n    return router.dehydrateData(key, data)\n  },\n  [])\n}\n\nexport function useHydrate() {\n  const router = useRouter()\n\n  return function hydrate<T = unknown>(key: any) {\n    return router.hydrateData(key) as T\n  }\n}\n\n// This is the messiest thing ever... I'm either seriously tired (likely) or\n// there has to be a better way to reset error boundaries when the\n// router's location key changes.\n\nexport function CatchBoundary(props: {\n  resetKey: string\n  children: any\n  errorComponent?: any\n  onCatch: (error: any) => void\n}) {\n  const errorComponent = props.errorComponent ?? ErrorComponent\n\n  return (\n    <CatchBoundaryImpl\n      resetKey={props.resetKey}\n      onCatch={props.onCatch}\n      children={({ error }) => {\n        if (error) {\n          return React.createElement(errorComponent, {\n            error,\n          })\n        }\n\n        return props.children\n      }}\n    />\n  )\n}\n\nexport class CatchBoundaryImpl extends React.Component<{\n  resetKey: string\n  children: (props: { error: any; reset: () => void }) => any\n  onCatch?: (error: any) => void\n}> {\n  state = { error: null } as any\n  static getDerivedStateFromError(error: any) {\n    return { error }\n  }\n  componentDidUpdate(\n    prevProps: Readonly<{\n      resetKey: string\n      children: (props: { error: any; reset: () => void }) => any\n      onCatch?: ((error: any, info: any) => void) | undefined\n    }>,\n    prevState: any,\n  ): void {\n    if (prevState.error && prevProps.resetKey !== this.props.resetKey) {\n      this.setState({ error: null })\n    }\n  }\n  componentDidCatch(error: any) {\n    this.props.onCatch?.(error)\n  }\n  render() {\n    return this.props.children(this.state)\n  }\n}\n\nexport function ErrorComponent({ error }: { error: any }) {\n  const [show, setShow] = React.useState(process.env.NODE_ENV !== 'production')\n\n  return (\n    <div style={{ padding: '.5rem', maxWidth: '100%' }}>\n      <div style={{ display: 'flex', alignItems: 'center', gap: '.5rem' }}>\n        <strong style={{ fontSize: '1rem' }}>Something went wrong!</strong>\n        <button\n          style={{\n            appearance: 'none',\n            fontSize: '.6em',\n            border: '1px solid currentColor',\n            padding: '.1rem .2rem',\n            fontWeight: 'bold',\n            borderRadius: '.25rem',\n          }}\n          onClick={() => setShow((d) => !d)}\n        >\n          {show ? 'Hide Error' : 'Show Error'}\n        </button>\n      </div>\n      <div style={{ height: '.25rem' }} />\n      {show ? (\n        <div>\n          <pre\n            style={{\n              fontSize: '.7em',\n              border: '1px solid red',\n              borderRadius: '.25rem',\n              padding: '.3rem',\n              color: 'red',\n              overflow: 'auto',\n            }}\n          >\n            {error.message ? <code>{error.message}</code> : null}\n          </pre>\n        </div>\n      ) : null}\n    </div>\n  )\n}\n\nexport function useBlocker(\n  message: string,\n  condition: boolean | any = true,\n): void {\n  const router = useRouter()\n\n  React.useEffect(() => {\n    if (!condition) return\n\n    let unblock = router.history.block((retry, cancel) => {\n      if (window.confirm(message)) {\n        unblock()\n        retry()\n      }\n    })\n\n    return unblock\n  })\n}\n\nexport function Block({ message, condition, children }: PromptProps) {\n  useBlocker(message, condition)\n  return (children ?? null) as ReactNode\n}\n\nexport function shallow<T>(objA: T, objB: T) {\n  if (Object.is(objA, objB)) {\n    return true\n  }\n\n  if (\n    typeof objA !== 'object' ||\n    objA === null ||\n    typeof objB !== 'object' ||\n    objB === null\n  ) {\n    return false\n  }\n\n  const keysA = Object.keys(objA)\n  if (keysA.length !== Object.keys(objB).length) {\n    return false\n  }\n\n  for (let i = 0; i < keysA.length; i++) {\n    if (\n      !Object.prototype.hasOwnProperty.call(objB, keysA[i] as string) ||\n      !Object.is(objA[keysA[i] as keyof T], objB[keysA[i] as keyof T])\n    ) {\n      return false\n    }\n  }\n  return true\n}\n"],"names":["useLayoutEffect","window","React","useEffect","Route","__onInit","route","Object","assign","useMatch","opts","from","id","useLoader","useRouteContext","select","d","context","useSearch","useParams","lazyRouteComponent","importer","exportName","loadPromise","load","lazyComp","lazy","moduleExports","comp","default","preload","useLinkProps","options","router","useRouter","match","strict","type","children","target","activeProps","className","inactiveProps","activeOptions","disabled","hash","search","params","to","state","mask","preloadDelay","replace","style","onClick","onFocus","onMouseEnter","onMouseLeave","onTouchStart","rest","linkInfo","buildLink","pathname","undefined","href","handleClick","handleFocus","handleEnter","handleLeave","handleTouchStart","isActive","next","handleReactClick","e","startTransition","composeHandlers","handlers","persist","filter","Boolean","forEach","handler","defaultPrevented","resolvedActiveProps","functionalUpdate","resolvedInactiveProps","maskedLocation","join","role","Link","forwardRef","props","ref","linkProps","createElement","_extends","Navigate","navigate","matchIdsContext","createContext","routerContext","useRouterState","useStore","__store","RouterProvider","update","unsub","mount","Wrap","Fragment","Provider","value","Matches","matchIds","renderedMatchIds","locationKey","resolvedLocation","key","getRoute","rootRouteId","errorComponent","useCallback","ErrorComponent","CatchBoundary","resetKey","onCatch","warning","Outlet","useContext","useMatches","matches","renderedMatches","slice","findIndex","nearestMatchId","nearestMatchRouteId","getRouteMatch","routeId","matchRouteId","find","invariant","matchSelection","loaderData","useRouterContext","last","useNavigate","defaultOpts","useMatchRoute","pending","caseSensitive","matchRoute","MatchRoute","Match","defaultPending","matchId","s","PendingComponent","pendingComponent","defaultPendingComponent","routeErrorComponent","defaultErrorComponent","ResolvedSuspenseBoundary","wrapInSuspense","isRoot","Suspense","SafeFragment","ResolvedCatchBoundary","fallback","MatchInner","matchesById","pick","status","error","component","defaultComponent","useInjectHtml","html","injectHtml","useDehydrate","dehydrate","data","dehydrateData","useHydrate","hydrate","hydrateData","CatchBoundaryImpl","Component","getDerivedStateFromError","componentDidUpdate","prevProps","prevState","setState","componentDidCatch","render","show","setShow","useState","process","env","NODE_ENV","padding","maxWidth","display","alignItems","gap","fontSize","appearance","border","fontWeight","borderRadius","height","color","overflow","message","useBlocker","condition","unblock","history","block","retry","cancel","confirm","Block","shallow","objA","objB","is","keysA","keys","length","i","prototype","hasOwnProperty","call"],"mappings":"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"}