{"version":3,"file":"index.js","sources":["../../../../../../../../../../../../node_modules/.pnpm/@tanstack+store@0.1.3/node_modules/@tanstack/store/build/modern/index.js"],"sourcesContent":["// src/index.ts\nvar Store = class {\n  constructor(initialState, options) {\n    this.listeners = /* @__PURE__ */ new Set();\n    this._batching = false;\n    this._flushing = 0;\n    this._nextPriority = null;\n    this.subscribe = (listener) => {\n      this.listeners.add(listener);\n      const unsub = this.options?.onSubscribe?.(listener, this);\n      return () => {\n        this.listeners.delete(listener);\n        unsub?.();\n      };\n    };\n    this.setState = (updater, opts) => {\n      const previous = this.state;\n      this.state = this.options?.updateFn ? this.options.updateFn(previous)(updater) : updater(previous);\n      const priority = opts?.priority ?? this.options?.defaultPriority ?? \"high\";\n      if (this._nextPriority === null) {\n        this._nextPriority = priority;\n      } else if (this._nextPriority === \"high\") {\n        this._nextPriority = priority;\n      } else {\n        this._nextPriority = this.options?.defaultPriority ?? \"high\";\n      }\n      this.options?.onUpdate?.({\n        priority: this._nextPriority\n      });\n      this._flush();\n    };\n    this._flush = () => {\n      if (this._batching)\n        return;\n      const flushId = ++this._flushing;\n      this.listeners.forEach((listener) => {\n        if (this._flushing !== flushId)\n          return;\n        listener({\n          priority: this._nextPriority ?? \"high\"\n        });\n      });\n    };\n    this.batch = (cb) => {\n      if (this._batching)\n        return cb();\n      this._batching = true;\n      cb();\n      this._batching = false;\n      this._flush();\n    };\n    this.state = initialState;\n    this.options = options;\n  }\n};\nexport {\n  Store\n};\n//# sourceMappingURL=index.js.map"],"names":[],"mappings":"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","x_google_ignoreList":[0]}